#
# good overview/intro articles on collectd
#
#	https://collectd.org/features.shtml
#	http://linuxpoison.blogspot.ca/2010/01/collectd-linux-system-statistics.html
#
# docker/collectd articles
#
#	http://blog.docker.io/2013/10/gathering-lxc-docker-containers-metrics/
#	https://www.iweb-hosting.co.uk/blog/collecting-lxc-container-resource-usage-using-ansible-collectd.html
#	http://blog.docker.io/2013/07/effortless-monitoring-with-collectd-graphite-and-docker/
#
# on Ubuntu 12.04, the line below installs version 4.10.1 of collectd
#
#   sudo apt-get install -y collectd
#
# collected installed @ /usr/sbin/collectd
#
# configuration is owned by root.root and stored at
#
#   /etc/collectd/collectd.conf
#
# to start collectd
#
#   sudo service collectd restart
#
# output
#
#   /var/lib/collectd/precise64
#
# sudo service collectd stop; sudo rm -rf /var/lib/collectd; sudo cp /vagrant/collectd.conf /etc/collectd/.; sudo service collectd start
#

FQDNLookup true
Interval 1

LoadPlugin syslog

<Plugin syslog>
	LogLevel info
</Plugin>

LoadPlugin battery
LoadPlugin cpu
# https://collectd.org/wiki/index.php/Plugin:CSV
# http://collectd.org/documentation/manpages/collectd.conf.5.shtml#plugin_csv
LoadPlugin csv
LoadPlugin df
LoadPlugin disk
LoadPlugin entropy
LoadPlugin interface
LoadPlugin irq
LoadPlugin load
LoadPlugin memory
LoadPlugin processes
LoadPlugin swap
# https://collectd.org/wiki/index.php/Plugin:Table
# http://collectd.org/documentation/manpages/collectd.conf.5.shtml#plugin_table
LoadPlugin table
LoadPlugin users

# Include "/etc/collectd/filters.conf"
# Include "/etc/collectd/thresholds.conf"

<Plugin csv>
	DataDir "/var/lib/collectd/csv"
	StoreRates false
</Plugin>

<Plugin table>
  <Table "/sys/fs/cgroup/memory/lxc/4bd1051900b81561b79b895b53a242db53fa785ea6a85bb2a1692e637bb98872/memory.usage_in_bytes">
    Instance "4bd1051900b81561b79b895b53a242db53fa785ea6a85bb2a1692e637bb98872-memory"
    Separator " \\n"
    <Result>
      Type gauge
      InstancesFrom 0
      ValuesFrom 0
    </Result>
  </Table>
  <Table "/sys/fs/cgroup/memory/lxc/84ad0113138a5e97c4a7e163764718056de444eedfcaa11a35106a01a1ce77b6/memory.usage_in_bytes">
    Instance "84ad0113138a5e97c4a7e163764718056de444eedfcaa11a35106a01a1ce77b6-memory"
    Separator " \\n"
    <Result>
      Type gauge
      InstancesFrom 0
      ValuesFrom 0
    </Result>
  </Table>
</Plugin>
